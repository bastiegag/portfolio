import { useId } from 'react';
import { gsap } from 'gsap';
import { useGSAP } from '@gsap/react';
import { styled, useTheme } from '@mui/material';

import { useParallax } from '@shared/hooks/parallax/useParallax';
import { useSettings } from '@features/settings';

const MASK_GRADIENT =
	'linear-gradient(180deg, transparent 5%, rgba(0,0,0,0.5) 25%, rgba(0,0,0,1) 100%)';

const SMOKE_DATA = {
	small: {
		path: 'M24.5 -246 C24.5,-246 8.77,-220.74 -0.61,-206.12 C-10,-191.5 -33.99,-158.27 -33.99,-123.88 C-33.99,-89.5 -17.54,-64.1 -2.02,-38.05 C13.5,-12 31.25,21.1 32.25,53.75 C33.11,81.91 13.41,117.28 3.21,133.14 C-7,149 -20.75,166.97 -20.75,194 C-20.75,226 7,299.5 7,299.5 C7,299.5 -8.75,229.58 -5.37,194.5 C-3.22,172.03 9.99,153.02 23,133.01 C36,113 53.5,87 52.75,54 C52,21 32.5,-6.49 12.25,-38 C-8,-69.5 -23.55,-90.27 -26.27,-123.88 C-29,-157.5 -8.62,-188.21 1.69,-205.35 C12,-222.5 24.5,-246 24.5,-246z',
		values: 'M24.5 -246 C24.5,-246 8.77,-220.74 -0.61,-206.12 C-10,-191.5 -33.99,-158.27 -33.99,-123.88 C-33.99,-89.5 -17.54,-64.1 -2.02,-38.05 C13.5,-12 31.25,21.1 32.25,53.75 C33.11,81.91 13.41,117.28 3.21,133.14 C-7,149 -20.75,166.97 -20.75,194 C-20.75,226 7,299.5 7,299.5 C7,299.5 -8.75,229.58 -5.37,194.5 C-3.22,172.03 9.99,153.02 23,133.01 C36,113 53.5,87 52.75,54 C52,21 32.5,-6.49 12.25,-38 C-8,-69.5 -23.55,-90.27 -26.27,-123.88 C-29,-157.5 -8.62,-188.21 1.69,-205.35 C12,-222.5 24.5,-246 24.5,-246z ;M12.44 -246 C9.25,-243.5 -5.98,-220.89 -13.74,-206.47 C-24,-186.24 -35.37,-153.42 -29.99,-123.53 C-23.49,-91.02 -2.18,-66.07 12.04,-38.2 C26.25,-10.35 36.22,23.74 29.94,53.75 C23.31,82.08 1.38,111.79 -10.98,133.3 C-21.25,150.9 -28.85,171.07 -25.06,194 C-18.12,227.25 7.5,281.5 7,299.5 C9.75,285.25 -6.69,229.08 -9.94,194.5 C-11.61,173.77 -2.39,151.84 9.44,133.02 C24.25,109.25 43.39,84.36 49.38,54 C56,22.25 44.5,-6.74 26.62,-37.98 C9.03,-68.67 -15.02,-92.9 -23.15,-123.54 C-30.51,-152.61 -22.06,-180.93 -11.18,-205.16 C-3.4,-220.93 10.25,-243.75 12.44,-246z ;M0.38 -246 C-6,-241 -17.74,-220.58 -23.86,-206.35 C-35,-180.5 -32.75,-149.04 -21.99,-123.65 C-9,-93 11.19,-67.84 24.1,-38.15 C37,-8.5 36.19,26.12 22.63,53.5 C8.5,82 -9.66,106 -24.17,133.17 C-34.5,152.5 -33.95,175.17 -26.37,194 C-12.5,228.5 8,263.5 7,299.5 C12.5,271 -0.63,228.58 -10.5,194.5 C-16,175.5 -14.78,150.66 -4.13,133.03 C12.5,105.5 29.28,81.72 42,54 C56,23.5 53.5,-7 38,-37.99 C23.05,-67.87 -0.5,-96 -14.02,-123.65 C-26.03,-148.19 -32.5,-174 -21.06,-205.31 C-15.8,-219.71 -4,-241.5 0.38,-246z ;M-11.69 -246 C-14.87,-243.5 -27.49,-220.34 -29.49,-206.09 C-31.73,-170.97 -22.71,-149.55 -9.99,-123.92 C4.25,-94.96 26.4,-68.28 32.17,-38.25 C37.86,-6.8 26.85,25.19 10.81,53.75 C-3.9,80.3 -25.76,105.1 -34.36,133.1 C-40.52,153.55 -32.22,174.84 -23.19,194 C-7.7,227.13 10.5,257.5 7,299.5 C17,262.75 3.18,226.29 -7.56,194.5 C-14.22,175.08 -20.86,152.43 -14.19,133.04 C-4.05,104.96 16.88,80.27 30.63,54 C46.25,24.25 55.08,-6.18 46.87,-37.98 C38.96,-68.58 12.61,-96.77 -2.4,-123.92 C-16.51,-149.31 -28.92,-171.34 -25.93,-205.26 C-24.52,-220.61 -13.88,-243.75 -11.69,-246z ;M-23.75 -246 C-23.75,-246 -32.25,-220.5 -30.11,-206.24 C-23.47,-161.84 -10.68,-149.64 4.01,-123.77 C19.5,-96.5 36.6,-68.46 35.23,-38.1 C33.73,-4.84 14.5,24 -4,53.75 C-19.29,78.34 -36.87,104.19 -39.54,133.03 C-41.54,154.6 -27.5,174.5 -17,194 C0.1,225.75 13,251.5 7,299.5 C21.5,254.5 10,224 -1.62,194.5 C-9.44,174.67 -21.94,154.17 -19.25,133.02 C-15.61,104.37 1.49,78.82 16.25,54 C33.5,25 50.67,-5.37 49.75,-37.99 C48.86,-69.32 27.71,-97.11 11.23,-123.77 C-5,-150 -21.33,-168.91 -26.81,-205.46 C-29.25,-221.75 -23.75,-246 -23.75,-246z ;M-27.62 -246 C-26.87,-243.25 -28.95,-219.71 -24.61,-206.45 C-13.23,-169.14 4.03,-150.67 17.76,-123.57 C32,-95.53 39.67,-66.3 32.85,-38.21 C24.36,-5.28 -0.37,22.5 -17.25,53.5 C-30.4,77.42 -42.88,106.34 -38.67,133.11 C-34.52,155.36 -18.08,174.83 -7.37,195.75 C9.05,227.75 13.5,257.75 7,299.5 C20.5,260.25 18.25,229.75 8,196 C1.95,176.9 -15.36,154.82 -18.38,133.07 C-21.05,107.22 -10.26,78.16 3.13,54 C19.61,24.1 39.83,-4.17 46.37,-37.97 C51.25,-66.92 39.61,-96.34 24.73,-123.57 C9.82,-150.93 -10.42,-173.61 -21.31,-205.32 C-26.3,-219.68 -26.62,-243.25 -27.62,-246z ;M-27.5 -246 C-26,-240.5 -21.65,-218.46 -15.11,-206.21 C1,-176 15.74,-152.13 28.51,-123.8 C41.5,-95 37.74,-63.93 25.48,-38.11 C10,-5.5 -14.24,21.49 -29.5,53.75 C-40.5,77 -45.89,108.38 -34.79,133.08 C-24.5,156 -7.66,174.91 3.25,197.25 C19,229.5 14,264 7,299.5 C19.5,266 27.5,235.5 18.63,197.5 C14.34,179.14 -4.78,155.41 -13.5,133.05 C-22.5,110 -21,77.5 -9,54 C6.73,23.2 25,-3 39,-37.97 C49.63,-64.55 49.5,-96 36.23,-123.8 C22.63,-152.28 4.5,-178.5 -11.81,-205.37 C-19.34,-217.78 -25.5,-240.5 -27.5,-246z ;M-19.37 -246 C-18.62,-243.25 -8.58,-218.32 -2.12,-206.18 C16.47,-171.25 29.87,-152.23 36.26,-123.83 C42.76,-93.75 29.14,-63.88 14.6,-38.31 C-2,-8.66 -29.12,19.37 -36.75,53.75 C-42.25,79.86 -35.94,110.26 -23.42,133.14 C-12.29,153.63 6.92,174.58 12.38,198.25 C20.25,236.13 10.5,269.75 7,299.5 C13.25,273.75 31.19,236 26.75,196 C24.61,175.32 7.11,154.75 -3.13,133.09 C-14.69,108.97 -22.62,80.19 -16.62,54 C-8.76,19.35 13,-5.73 28.12,-37.96 C41.41,-65.69 50.36,-92.17 43.73,-123.84 C36.93,-157.31 17.5,-176.89 1.19,-205.28 C-6.52,-218.72 -18.37,-243.25 -19.37,-246z ;M-11.25 -246 C-11.25,-246 5.5,-218.5 11.89,-206.47 C32.93,-166.83 38.01,-152 38.01,-123.53 C38.01,-92.18 17.54,-63.52 0.73,-38.2 C-17,-11.5 -39,17 -39,53.5 C-39,82.46 -24,112 -10.04,133.05 C1.93,151.12 19.5,174.5 19.5,199.5 C19.5,243 7,275.5 7,299.5 C7,281.5 33.88,236.5 33.88,194.5 C33.88,171.5 22,154 10.25,133.04 C-3.87,107.85 -19.25,82.88 -19.25,54 C-19.25,15.5 -2,-8.5 14.25,-37.98 C30.17,-66.88 45.23,-88 45.23,-123.54 C45.23,-162 31.5,-175.5 15.19,-205.41 C7.3,-219.88 -11.25,-246 -11.25,-246z ;M3.63 -246 C6.38,-237.5 19.9,-219.12 25.39,-206.34 C40.47,-173.08 41.32,-150.14 34.89,-123.64 C27.26,-93.41 2.21,-66.01 -13.52,-38.31 C-28.5,-12.41 -44.25,20 -37.25,53.5 C-30.68,82.3 -8.75,111.58 4.58,134.16 C15.59,152.72 25.86,176.62 23,199.5 C19,235.75 4.5,272.5 7,299.5 C5.75,277 31.44,232.75 38.5,197 C43.14,175.81 35.5,152.8 24.62,133.6 C9.82,107.53 -9.12,83.19 -17.12,54 C-24.43,21.28 -12.75,-11.96 0.5,-37.93 C15.22,-67.17 35.11,-90.57 42.35,-123.64 C48.18,-155.21 40,-177.11 28.13,-205.22 C22.12,-219.76 7.88,-239 3.63,-246z ;M18.5 -246 C24,-229 30.29,-219.9 34.89,-206.36 C44,-179.5 39.64,-148.15 26.76,-123.6 C11.5,-94.5 -11.13,-68.18 -25.77,-38.11 C-38,-13 -43.5,23 -29.5,53.5 C-16.36,82.14 5.5,111 18.21,135.11 C28.25,154.16 29.23,178.74 23.5,199.5 C15.5,228.5 2,269.5 7,299.5 C4.5,272.5 24,228.5 38.13,199 C47.4,179.63 47,152 37,134.57 C21.52,107.6 6,83.5 -10,54 C-24.62,27.05 -22.5,-15.5 -12.25,-37.95 C1.25,-67.54 20,-93 34.48,-123.61 C46.14,-148.27 46.5,-179 39.07,-205.31 C34.93,-219.93 27,-232 18.5,-246z ;M27.88 -246 C30.63,-237.5 38.09,-225.08 40.39,-206.26 C44.94,-180.25 29.07,-147.41 15.14,-123.67 C-1.07,-95.99 -26.2,-68.25 -33.52,-38.02 C-39.64,-4.63 -33.93,22.48 -17.75,53.5 C-3.18,81.57 21.98,112.71 28.33,136.16 C33.35,158.41 27.11,176.74 19.5,199.5 C11.45,224.55 -5.06,265.94 7,299.5 C2,266.5 18.67,233.22 34.75,199.5 C44.2,179.69 52.87,157.3 47.87,135.1 C40.13,109.35 18.65,81.07 3.13,54 C-12.43,27.03 -25.13,-9.86 -20,-37.91 C-13.25,-68.35 5.27,-93.42 22.1,-123.68 C34.32,-145.97 47.72,-179.1 44,-205.2 C41.94,-228.44 32.13,-239 27.88,-246z ;M37.25 -246 C37.25,-246 40.89,-230.5 40.89,-206.39 C40.89,-181.25 15.5,-146.5 0.51,-123.57 C-16.64,-97.32 -36.27,-68.8 -36.27,-38.41 C-36.27,3.25 -22.36,21.95 -4,53.5 C12,81 32.46,114.25 32.46,137.05 C32.46,162.5 23,174.75 13.5,199.5 C5.4,220.59 -12.12,262.38 7,299.5 C-0.5,260.5 10.35,237.43 28.38,199.5 C38,179.25 52.75,163 52.75,136.04 C52.75,111.5 31.31,78.64 16.25,54 C-0.25,27 -21.75,-4.3 -21.75,-37.97 C-21.75,-69.25 -11.45,-93.66 7.73,-123.57 C20.5,-143.5 43.94,-179.5 43.94,-205.4 C43.94,-237.25 37.25,-246 37.25,-246z ;M42.6 -246 C42.25,-239.37 39.02,-225.24 35.85,-206.43 C28.73,-179.85 3.23,-150.87 -12.56,-123.99 C-27.98,-98.22 -39.98,-66.76 -34.55,-38.36 C-27.9,-1.19 -6.44,23.24 9.97,53.73 C24.06,79.84 36.05,112.38 31.69,136.4 C27.87,160.41 14.02,174.88 5.15,198.48 C-4.65,224.73 -10.44,259.19 7,299.5 C-2.25,256.63 5.1,231.36 20.14,198.21 C29.58,177.13 46.8,159.89 51.55,135.24 C56.83,110.81 43.71,77.2 30.28,54 C13.58,24.85 -12.45,-5.5 -20.59,-37.93 C-27.13,-66.28 -20.54,-97.27 -5.23,-124 C7.75,-147.76 31.99,-179.1 39.24,-205.16 C42.61,-228.01 43.75,-242.12 42.6,-246z ;M41.95 -246 C41.25,-232.75 34.15,-219.56 27.82,-206.04 C13.57,-178.03 -6.04,-154.75 -22.63,-123.92 C-36.32,-98.64 -39.69,-64.86 -28.82,-38.45 C-15.53,-5.78 5.47,24.29 19.95,53.73 C32.11,78.45 34.64,110.12 25.93,135.35 C18.29,157.92 6.04,174.52 -2.2,196.98 C-13.7,228.39 -8.75,256 7,299.5 C-4,252.75 0.86,225.58 12.91,197.21 C22.17,175.3 37.85,157.04 47.36,134.71 C57.91,110.37 52.11,75.76 40.31,54 C23.4,22.7 1.85,-6.78 -14.42,-37.96 C-27.5,-63.38 -26.62,-100.39 -15.19,-123.92 C-2.01,-151.52 16.04,-179.04 30.54,-205.26 C37.28,-219.12 44.25,-238.25 41.95,-246z ;M35.22 -246 C34.88,-239.37 21.46,-220.23 13.6,-206.16 C1.78,-184.84 -23.01,-156.41 -31.31,-123.8 C-38.15,-93.97 -28.62,-64.48 -15.42,-38.25 C-1.01,-8.89 21.86,22.93 29.6,53.98 C36.11,80.42 25.52,113.94 16.07,134.49 C7.14,153.7 -8.85,170.74 -12.97,195.48 C-18.73,227.18 -0.87,277.75 7,299.5 C1.5,276.13 -5.94,227.43 1.77,195.71 C7.48,173.52 25.42,154.89 36.68,133.72 C48.46,111.55 56.3,81.38 50.03,54 C41.2,21.85 16.67,-6.61 -1.59,-37.96 C-18.25,-66.42 -28.58,-95.23 -24.23,-123.81 C-19,-154.42 3.21,-183.43 15.61,-205.11 C24.14,-220.61 36.38,-242.12 35.22,-246z ;M24.5 -246 C24.5,-246 8.77,-220.74 -0.61,-206.12 C-10,-191.5 -33.99,-158.27 -33.99,-123.88 C-33.99,-89.5 -17.54,-64.1 -2.02,-38.05 C13.5,-12 31.25,21.1 32.25,53.75 C33.11,81.91 13.41,117.28 3.21,133.14 C-7,149 -20.75,166.97 -20.75,194 C-20.75,226 7,299.5 7,299.5 C7,299.5 -8.75,229.58 -5.37,194.5 C-3.22,172.03 9.99,153.02 23,133.01 C36,113 53.5,87 52.75,54 C52,21 32.5,-6.49 12.25,-38 C-8,-69.5 -23.55,-90.27 -26.27,-123.88 C-29,-157.5 -8.62,-188.21 1.69,-205.35 C12,-222.5 24.5,-246 24.5,-246z ;M24.5 -246 C24.5,-246 8.77,-220.74 -0.61,-206.12 C-10,-191.5 -33.99,-158.27 -33.99,-123.88 C-33.99,-89.5 -17.54,-64.1 -2.02,-38.05 C13.5,-12 31.25,21.1 32.25,53.75 C33.11,81.91 13.41,117.28 3.21,133.14 C-7,149 -20.75,166.97 -20.75,194 C-20.75,226 7,299.5 7,299.5 C7,299.5 -8.75,229.58 -5.37,194.5 C-3.22,172.03 9.99,153.02 23,133.01 C36,113 53.5,87 52.75,54 C52,21 32.5,-6.49 12.25,-38 C-8,-69.5 -23.55,-90.27 -26.27,-123.88 C-29,-157.5 -8.62,-188.21 1.69,-205.35 C12,-222.5 24.5,-246 24.5,-246z ',
	},
	large: {
		path: 'M-33.5 -246 C-37,-239 -46,-225.5 -44.61,-206.24 C-42.43,-175.82 -26,-150.5 -4.99,-123.77 C14.62,-98.82 41.14,-69.56 36.48,-38.1 C31.5,-4.5 -14.5,24.5 -46.25,53.5 C-70.18,75.36 -85.5,101.5 -70.29,133.28 C-59.94,154.9 -47,173.09 -30.25,194 C-1,230.5 13.5,261.5 7,299.5 C23.5,256.5 7.61,217.33 -6.87,194.5 C-24,167.5 -29.5,149 -12,133.02 C16.52,106.97 50.35,84.89 72.75,54 C94.5,24 89,-12 75.25,-37.99 C58.28,-70.06 32.5,-99.5 8.23,-123.77 C-14.12,-146.11 -38.31,-173.67 -40.31,-205.21 C-41.5,-224 -35.5,-234 -33.5,-246z',
		values: 'M-33.5 -246 C-37,-239 -46,-225.5 -44.61,-206.24 C-42.43,-175.82 -26,-150.5 -4.99,-123.77 C14.62,-98.82 41.14,-69.56 36.48,-38.1 C31.5,-4.5 -14.5,24.5 -46.25,53.5 C-70.18,75.36 -85.5,101.5 -70.29,133.28 C-59.94,154.9 -47,173.09 -30.25,194 C-1,230.5 13.5,261.5 7,299.5 C23.5,256.5 7.61,217.33 -6.87,194.5 C-24,167.5 -29.5,149 -12,133.02 C16.52,106.97 50.35,84.89 72.75,54 C94.5,24 89,-12 75.25,-37.99 C58.28,-70.06 32.5,-99.5 8.23,-123.77 C-14.12,-146.11 -38.31,-173.67 -40.31,-205.21 C-41.5,-224 -35.5,-234 -33.5,-246z ;M-41 -246 C-44.5,-234.5 -44.5,-221.5 -40.11,-206.47 C-31.43,-176.71 -4.86,-150.75 15.51,-123.53 C35,-97.5 49.5,-72 36.48,-38.1 C27.19,-13.92 -34.71,24.82 -66.75,53.5 C-93,77 -96,100.5 -72.79,133.05 C-57.67,154.27 -36.95,173.46 -19.75,194 C17.5,238.5 13.5,261.5 7,299.5 C23.5,256.5 25,230 4.63,194.5 C-11.29,166.77 -26.97,151.8 -12.5,133.04 C9.5,104.5 29.8,84.11 53.25,54 C73.5,28 80.5,-11 74.25,-37.98 C66.84,-69.96 64,-86.5 28.73,-123.54 C6.93,-146.42 -24.53,-176.28 -35.81,-205.8 C-42,-222 -40,-232.5 -41,-246z ;M-41 -246 C-41.5,-232.5 -39.14,-219.23 -30.11,-206.45 C-12.5,-181.5 15.17,-151.6 32.51,-123.57 C50.5,-94.5 47.75,-65.92 28.48,-38.2 C12,-14.5 -50.5,18.5 -83.75,53.5 C-108.02,79.04 -98.5,103.5 -68.29,133.11 C-49.69,151.35 -23.03,173.12 -6.25,194 C25.5,233.5 13.5,261.5 7,299.5 C23.5,256.5 36.5,227.5 17.63,194.5 C1.75,166.75 -18.5,155 -8.5,133.07 C5.53,102.28 20,84.5 36.25,54 C51.75,24.92 64,-10.5 66.75,-37.97 C70.02,-70.63 69,-93.5 45.73,-123.57 C26.39,-148.56 -11,-185 -24.81,-205.59 C-34.47,-220 -40,-232.5 -41,-246z ;M-35.5 -246 C-30,-229.5 -21.14,-219.18 -12.11,-206.39 C5.5,-181.45 31.5,-157 44.01,-123.64 C56.02,-91.63 37,-61.5 14.98,-38.41 C-4.94,-17.52 -61.5,11 -96.25,53.5 C-118.55,80.78 -89,107.5 -54.29,133.22 C-33.36,148.73 -7.77,173.16 7.75,195 C28,223.5 15.5,261.5 7,299.5 C23.5,256.5 44.5,226.5 31.13,194.5 C18.8,165 1.5,152 3.5,133.14 C7.06,99.49 13.5,85.5 23.25,54 C32.99,22.52 42,-9.5 51.75,-37.93 C62.4,-68.98 72.5,-94 57.73,-123.64 C43.63,-151.93 10,-185 -6.31,-205.68 C-17.05,-219.31 -27.5,-230.5 -35.5,-246z ;M-22.5 -246 C-12.5,-230.5 -1.55,-218.77 7.89,-206.28 C27,-181 48.75,-159.4 49.51,-123.77 C50,-101 24,-60 -4.02,-38.32 C-26.85,-20.65 -85,14 -102.75,53.5 C-114.44,79.53 -75,109.5 -36.79,133.43 C-14.71,147.26 10,170.5 19.25,195 C31.6,227.71 13.5,260 7,299.5 C21,253 44,228 42.63,194.5 C41.31,162.55 31.5,150.5 26.5,133.06 C17.17,100.53 17,84 16.25,54 C15.43,21.06 19.5,-10 33.75,-37.86 C48.69,-67.09 68.8,-96.95 62.23,-123.79 C52.5,-163.5 28.5,-185.18 12.19,-205.87 C1.45,-219.49 -9.5,-231.5 -22.5,-246z ;M-5 -246 C5,-230.5 17.45,-218.55 26.89,-206.07 C46,-180.78 57.59,-157.87 48.01,-123.54 C42,-102 3.16,-60.86 -24.02,-38.13 C-47.5,-18.5 -97,13 -102.25,53.5 C-105.92,81.8 -55.97,107.86 -18.79,133.36 C4,149 25.39,168.88 27.25,195 C29.5,226.5 6.5,261 7,299.5 C14.5,256.5 42.36,225.98 51.13,194.49 C58.5,168 51.5,154 45.5,133.11 C36.15,100.59 31.5,84 18.75,54 C5.86,23.67 -1,-9.86 13.25,-37.72 C28.19,-66.95 56.84,-97.09 60.73,-123.58 C66,-159.5 47.5,-185.05 31.19,-205.74 C20.45,-219.36 8,-231.5 -5,-246z ;M15.5 -246 C25.5,-230.5 35,-220 42.39,-206.13 C57.28,-178.16 57.78,-153.65 38.51,-123.68 C26.5,-105 -16.05,-62.89 -41.52,-38.26 C-63,-17.5 -102,16 -92.75,53.5 C-85.92,81.2 -37.97,107.72 -0.79,133.22 C22,148.86 32.5,160 29.25,194.99 C26.56,224.01 0.5,253 6,299.5 C10.5,253 36.14,227.31 53.63,194.48 C64,175 64.5,150.5 62.5,133.22 C58.6,99.61 46.5,80.5 27.75,54 C8.71,27.1 -18,-7.5 -3.75,-37.95 C10.16,-67.68 39,-98 51.23,-123.66 C66.84,-156.43 62,-182.5 46.19,-205.98 C36.5,-220.36 28.5,-231.5 15.5,-246z ;M33 -246 C43,-230.5 48.96,-221.34 53.39,-206.27 C60.5,-182 47,-152.5 22.51,-123.73 C8.12,-106.81 -33.5,-66.5 -55.02,-38.03 C-73.03,-14.19 -96.24,18.82 -79.25,53.5 C-67,78.5 -20.42,107.16 16.21,133.44 C36.5,148 38.65,161.74 27.25,194.98 C18.5,220.5 -5.5,253 6,299.5 C3,256.5 27.5,228.5 52.13,194.47 C65.06,176.58 73.46,150.83 74,133.45 C75,101 73,86 42.25,54.01 C19.41,30.25 -23.5,-8 -16.75,-37.9 C-9.52,-69.92 19,-98.5 35.73,-123.82 C55.74,-154.11 64.5,-184 56.19,-205.95 C50.05,-222.18 46,-231.5 33,-246z ;M47.5 -246 C56,-228.5 55.99,-220.99 55.39,-206.03 C54.5,-184 32,-152 4.01,-123.91 C-11.66,-108.17 -47,-71.5 -62.02,-38.05 C-74.26,-10.8 -81,21.5 -60.25,53.5 C-45.1,76.86 -9.5,100.5 25.21,133.38 C43.34,150.56 34,168 19.75,194.96 C5.88,221.2 -9.5,253.5 6,299.5 C-2,253.5 16,227 43.63,194.43 C57.9,177.6 77.58,150.36 83.5,133.39 C95.5,99 91,83.5 60.25,54.02 C36.46,31.21 -20.3,-12.17 -23.75,-37.8 C-28.5,-73 -1,-101 16.73,-123.64 C39.11,-152.23 60.5,-183.5 58.19,-205.91 C56.41,-223.16 57.5,-231 47.5,-246z ;M56 -246 C56.5,-229 57.63,-219.49 50.89,-206.12 C43,-190.5 11,-152 -15.99,-123.75 C-31.33,-107.69 -62,-69.5 -62.02,-38.05 C-62.04,-8.18 -61.5,21.5 -40.75,53.5 C-25.6,76.86 4.5,103.5 25.21,133.38 C39.43,153.91 22.5,167.96 8.25,194.92 C-5.62,221.16 -15,251 6,299.5 C-4.5,251.5 5.5,226.93 33.13,194.36 C47.4,177.53 74.32,147.74 85,133.28 C107,103.5 110.5,83.52 79.75,54.03 C55.96,31.22 -13,-15 -23.75,-37.8 C-38.9,-69.92 -20,-101.14 -2.27,-123.78 C20.11,-152.37 44.71,-182.03 55.19,-205.81 C61,-219 60,-231 56,-246z ;M56 -246 C54,-225.5 47,-220 38.39,-206.25 C29.09,-191.42 -9,-152 -32.49,-124 C-46.76,-106.98 -63.5,-69.5 -53.02,-38.11 C-43.56,-9.77 -40.01,19.24 -23.25,53.5 C-12,76.5 12.18,103.35 22.71,133.27 C30,154 7.65,166.06 -4.25,194.84 C-19,230.5 -15,251 6,299.5 C-4.5,251.5 -5,224 20.13,194.22 C34.36,177.35 65.5,147 81,133.06 C108.53,108.3 124.6,82.89 97.25,54.06 C73,28.5 1,-18.5 -14.25,-37.59 C-36.42,-65.35 -38.5,-97.5 -19.27,-123.56 C2.28,-152.78 27,-182 42.19,-205.62 C49.99,-217.75 58,-230 56,-246z ;M50.5 -246 C41.5,-226 34,-221 21.89,-206.5 C10.66,-193.07 -27.9,-156.31 -44.99,-124 C-59,-97.5 -53.02,-67.97 -38.52,-38.22 C-25.5,-11.5 -19.25,21.23 -10.25,53.5 C-3,79.5 4.5,103 9.21,133.03 C12.54,154.32 -10.11,164.62 -18.25,194.68 C-27,227 -15,251 6,299.5 C-4.5,251.5 -13.5,224 6.13,194.45 C18.34,176.06 47,147 68,133.13 C98.89,112.71 131.5,84 110.25,54.13 C89.83,25.41 17,-20.5 0.25,-37.69 C-24.55,-63.13 -45,-96.5 -31.27,-123.62 C-14.88,-156.01 8,-183 26.19,-205.75 C35.19,-217 48,-229 50.5,-246z ;M37 -246 C24.5,-227 14,-221 1.89,-206.5 C-9.34,-193.07 -46.06,-160.33 -49.99,-124 C-53.5,-91.5 -39,-66 -21.02,-38.44 C-4.78,-13.54 -5.04,20 -4.75,53.5 C-4.5,82.5 -4.5,101 -6.29,133.06 C-7.45,153.65 -29.82,163.72 -29.25,194.86 C-28.5,235.5 -6,256.5 6,299.5 C-4.5,251.5 -15,225 -5.37,194.28 C1.22,173.22 26,148 50,133 C81.4,113.37 125.34,87.03 115.75,54.25 C105,17.5 36.5,-22.5 17.25,-37.87 C-10.51,-60.04 -39.5,-96 -36.77,-123.74 C-33.22,-159.87 -12.21,-183.84 6.69,-206 C16.5,-217.5 31.5,-230 37,-246z ;M19.5 -246 C3.5,-228 -4,-221 -16.11,-206.5 C-27.34,-193.07 -53,-163.5 -48.99,-124 C-45.68,-91.48 -19,-65.94 -1.02,-38.37 C15.22,-13.48 6.91,24.81 -4.75,53.5 C-14.5,77.5 -23.89,102.97 -33.29,133.25 C-39,151.63 -43.5,162.5 -36.75,194.72 C-28.41,234.5 -5,250 6,299.5 C4.5,255.5 -16,229.5 -13.37,194.06 C-11.74,172.05 7,148.5 32,133 C63.47,113.49 116.71,83.56 114.75,54 C112,12.5 57,-22.37 37.75,-37.75 C9.99,-59.92 -26.5,-95 -34.77,-123.98 C-44.74,-158.89 -28,-184.5 -11.81,-206 C-2.72,-218.07 9,-230.5 19.5,-246z ;M0 -246 C-16,-228 -21.97,-222.11 -32.61,-206.5 C-42.5,-192 -57.26,-158.99 -38.49,-124 C-24,-97 2.34,-67.72 16.98,-38.25 C32,-8 4.76,26.8 -13.75,53.5 C-29,75.5 -43,103 -48.29,133 C-51.64,151.95 -52.5,171 -40.25,194.94 C-21.73,231.12 6.5,259.5 6,299.5 C13,253.5 -11.5,229 -16.37,194.13 C-19.43,172.27 -17,150 12.5,133 C44.58,114.51 100.41,81.79 106.25,54 C115.5,10 74.5,-18 54.75,-38 C29.79,-63.27 -10.5,-97 -25.77,-123.97 C-43.67,-155.56 -44.5,-184.5 -28.31,-206 C-19.22,-218.07 -10.5,-230.5 0,-246z ;M-19 -246 C-32.5,-232 -35.98,-224.37 -42.11,-206.5 C-49.5,-185 -45.44,-156.74 -22.99,-124 C-5.5,-98.5 20.56,-70.17 29.48,-38.49 C37.5,-10 -5.23,31.62 -29.25,53.5 C-54.5,76.5 -62.41,103.53 -61.29,133 C-60.5,154 -53.19,173.22 -37.25,194.88 C-12.5,228.5 10.5,259 6,299.5 C19.5,252.5 -4.5,226 -14.37,194.25 C-20.93,173.17 -29.5,150.5 -2.5,133 C28.57,112.86 77.84,81.17 91.25,54 C110,16 88.5,-14 67.75,-38 C44.51,-64.87 8,-103 -10.77,-123.94 C-35.01,-150.97 -46,-180 -38.31,-206 C-34.02,-220.49 -29.5,-230.5 -19,-246z ;M-33.5 -246 C-37,-239 -46,-225.5 -44.61,-206.24 C-42.43,-175.82 -26,-150.5 -4.99,-123.77 C14.62,-98.82 41.14,-69.56 36.48,-38.1 C31.5,-4.5 -14.5,24.5 -46.25,53.5 C-70.18,75.36 -85.5,101.5 -70.29,133.28 C-59.94,154.9 -47,173.09 -30.25,194 C-1,230.5 13.5,261.5 7,299.5 C23.5,256.5 7.61,217.33 -6.87,194.5 C-24,167.5 -29.5,149 -12,133.02 C16.52,106.97 50.35,84.89 72.75,54 C94.5,24 89,-12 75.25,-37.99 C58.28,-70.06 32.5,-99.5 8.23,-123.77 C-14.12,-146.11 -38.31,-173.67 -40.31,-205.21 C-41.5,-224 -35.5,-234 -33.5,-246z ;M-33.5 -246 C-37,-239 -46,-225.5 -44.61,-206.24 C-42.43,-175.82 -26,-150.5 -4.99,-123.77 C14.62,-98.82 41.14,-69.56 36.48,-38.1 C31.5,-4.5 -14.5,24.5 -46.25,53.5 C-70.18,75.36 -85.5,101.5 -70.29,133.28 C-59.94,154.9 -47,173.09 -30.25,194 C-1,230.5 13.5,261.5 7,299.5 C23.5,256.5 7.61,217.33 -6.87,194.5 C-24,167.5 -29.5,149 -12,133.02 C16.52,106.97 50.35,84.89 72.75,54 C94.5,24 89,-12 75.25,-37.99 C58.28,-70.06 32.5,-99.5 8.23,-123.77 C-14.12,-146.11 -38.31,-173.67 -40.31,-205.21 C-41.5,-224 -35.5,-234 -33.5,-246z ',
	},
};

export interface SmokeProps {
	modifier: {
		x: number;
		y: number;
	};
	x: number;
	y: number;
}

const SmokeRoot = styled('g', {
	name: 'Smoke',
	slot: 'root',
})<{ 'data-night': boolean }>(({ 'data-night': isNight }) => ({
	mixBlendMode: 'multiply',
	svg: {
		maskImage: MASK_GRADIENT,
		WebkitMaskImage: MASK_GRADIENT,
	},
	opacity: isNight ? 0 : 1,
}));

export const Smoke = ({ modifier, x, y }: SmokeProps) => {
	const id = CSS.escape(useId());
	const colors = useTheme().vars.palette;
	const { settings } = useSettings();

	useParallax(`#${id}`, x, y, modifier);

	useGSAP(() => {
		const timeline = gsap.timeline({
			repeat: -1,
			repeatRefresh: true,
		});

		timeline.to(`#${id}`, {
			duration: gsap.utils.random(2, 5, true),
			skewX: gsap.utils.random(-4, 4, true),
			ease: 'power1.inOut',
			svgOrigin: '120 280',
		});
	}, [id]);

	return (
		<SmokeRoot
			id={id}
			data-night={settings.time === 'night'}
			className="Smoke-root"
			transform={`translate(${x},${y})`}
		>
			<svg width="60" height="140" viewBox="0 0 240 560">
				<defs>
					{Object.entries(SMOKE_DATA).map(([size, params]) => (
						<animate
							key={size}
							repeatCount="indefinite"
							dur="8s"
							begin="0s"
							href={`#Smoke-${size}`}
							fill="freeze"
							attributeName="d"
							attributeType="XML"
							from={params.path}
							to={params.path}
							keyTimes="0;0.0520833;0.1145833;0.1770833;0.2395833;0.3020833;0.3645833;0.4270833;0.4895833;0.5520833;0.6145833;0.6770833;0.7395833;0.8020833;0.8645833;0.9270833;0.9895833;1"
							values={params.values}
							keySplines="0.167 0.167 0.833 0.833;0.167 0.167 0.833 0.833;0.167 0.167 0.833 0.833;0.167 0.167 0.833 0.833;0.167 0.167 0.833 0.833;0.167 0.167 0.833 0.833;0.167 0.167 0.833 0.833;0.167 0.167 0.833 0.833;0.167 0.167 0.833 0.833;0.167 0.167 0.833 0.833;0.167 0.167 0.833 0.833;0.167 0.167 0.833 0.833;0.167 0.167 0.833 0.833;0.167 0.167 0.833 0.833;0.167 0.167 0.833 0.833;0.167 0.167 0.833 0.833;0 0 0 0"
							calcMode="spline"
						/>
					))}
				</defs>
				{Object.entries(SMOKE_DATA).map(([size, params]) => (
					<path
						key={size}
						id={`Smoke-${size}`}
						fill={colors.base.light}
						className={`Smoke-${size}`}
						transform="translate(114, 253) translate(0, 0)"
						d={params.path}
					/>
				))}
			</svg>
		</SmokeRoot>
	);
};
